<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>W04 Task 1 – Reading Data with Options</title>
  <script src="https://d3js.org/d3.v6.min.js"></script>
</head>
<body>
<h2 style="font-family:sans-serif;">W04 Task 1 : Colored Circles (with Options)</h2>

<script>
    const width = 400, height = 250;
    const svg = d3.select("body").append("svg")
      .attr("width", width).attr("height", height)
      .style("background-color", "#f8f8f8");
    
    const url = "https://kinarimatsuzaki-class.github.io/InfoVis2025/W04/w04_task1.csv"; 
    
    d3.csv(url).then(data => {
      console.log("Loaded rows:", data.length, data);
      data.forEach(d => { d.x=+d.x; d.y=+d.y; d.r=+d.r; d.opacity = d.opacity ? +d.opacity : 0.9; });
    
      svg.selectAll("circle").data(data).enter().append("circle")
        .attr("cx", d=>d.x).attr("cy", d=>d.y).attr("r", d=>d.r)
        .style("fill", d=>d.color || "steelblue")
        .style("opacity", d=>d.opacity).style("stroke","#333").style("stroke-width",1);
    
      svg.selectAll("text").data(data).enter().append("text")
        .attr("x", d=>d.x + d.r + 5).attr("y", d=>d.y + 5)
        .text((d,i)=>d.label || `Point ${i+1}`)
        .style("font-size","12px").style("font-family","sans-serif");
    }).catch(err => {
      console.error("CSV load failed:", err);
      d3.select("body").append("p").text("CSVの読み込みに失敗しました: " + url);
    });
    </script>
</body>
</html>
